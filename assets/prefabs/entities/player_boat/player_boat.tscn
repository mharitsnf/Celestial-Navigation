[gd_scene load_steps=16 format=3 uid="uid://bl6seajhin6ok"]

[ext_resource type="PackedScene" uid="uid://ci81rhjnjhe5x" path="res://assets/prefabs/entities/base_entity.tscn" id="1_s5hml"]
[ext_resource type="Script" path="res://assets/prefabs/entities/player_boat/player_boat_entity.gd" id="2_rbht2"]
[ext_resource type="PackedScene" uid="uid://di3opcoc1bjq5" path="res://assets/models/player_boat/player_boat_inst.tscn" id="3_itsa4"]
[ext_resource type="PackedScene" uid="uid://ds1eu4orjyhpy" path="res://assets/prefabs/particles/boat_engine.tscn" id="4_rixfk"]
[ext_resource type="PackedScene" uid="uid://diiot23srn01f" path="res://assets/prefabs/virtual camera/third_person_camera.tscn" id="5_5wq2t"]
[ext_resource type="Script" path="res://assets/prefabs/controllers/camera/player_vcc.gd" id="6_rjn0y"]
[ext_resource type="PackedScene" uid="uid://bcgslrgfaqyrk" path="res://assets/prefabs/virtual camera/first_person_camera.tscn" id="7_4om71"]
[ext_resource type="Script" path="res://assets/prefabs/controllers/camera/hard_look_vcc.gd" id="7_bks34"]
[ext_resource type="PackedScene" uid="uid://ccsl3yyji70j7" path="res://assets/prefabs/controllers/camera/fpc_function/fpc_camera.tscn" id="8_k2oyu"]
[ext_resource type="Script" path="res://assets/prefabs/controllers/camera/first_person_vcc.gd" id="8_t2aea"]
[ext_resource type="PackedScene" uid="uid://c26yw05wco6bu" path="res://assets/prefabs/controllers/player/boat/player_boat_controller.tscn" id="9_wqan3"]
[ext_resource type="PackedScene" uid="uid://c2ipvtnsysqv" path="res://assets/prefabs/entities/characters/duck/player_character_entity.tscn" id="10_31xpf"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_2cixb"]
points = PackedVector3Array(-0.4432, -0.0914739, -3.65871, 0.48322, -0.0826591, -3.6513, -0.303897, 7.83539, -0.246553, 3.10388, 1.01987, -2.51775, -3.06223, 1.01987, -3.81601, 0.482664, 1.92791, -5.34334, 0.0208259, -0.104903, 3.164, 1.48087, 1.99363, 3.48658, -2.08867, 1.99363, 2.1873, 0.993788, 6.53598, -0.246553, 2.29208, 1.01987, -5.11427, -2.21137, 0.908054, -5.03335, -2.89987, 0.53299, -2.19242, 0.18198, 2.15566, 4.78382, -0.280535, 3.32721, -4.62473, -0.303897, 7.83539, 0.240422, -1.76394, 4.58846, -0.246553, 2.13032, 1.99363, 2.02566, 2.94152, 0.695018, -2.02975, 0.344945, 7.67256, -0.246553, 2.94152, 1.1819, -4.1393, -1.34032, 0.752825, 2.76877, -1.1145, 1.99363, 3.97254, 0.766742, 3.33103, -4.43936, 1.23762, 0.733876, 2.9403, -1.30758, 3.0405, -4.24689, -3.06223, 1.01987, -2.19242, 0.0208259, 0.65942, 4.26988, 0.636273, -0.0735105, 2.21044, 1.80499, 4.42644, -0.246553, -0.13474, 0.357568, -4.76144, -0.589064, -0.035177, 2.48922)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jktrs"]
radius = 3.1
height = 10.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4nvc2"]
radius = 7.6
height = 18.2

[node name="PlayerBoat" node_paths=PackedStringArray("propellers", "gas_particles", "normal_container", "visual_container") groups=["player_boat"] instance=ExtResource("1_s5hml")]
mass = 600.0
script = ExtResource("2_rbht2")
propeller_rotation_speed = 125.0
propeller_start_weight = 5.0
propeller_stop_weight = 3.0
propellers = [NodePath("CollisionShape3D/PlayerBoatInst/PropellerL"), NodePath("CollisionShape3D/PlayerBoatInst/PropellerR")]
gas_particles = [NodePath("CollisionShape3D/Particles/BoatEngine"), NodePath("CollisionShape3D/Particles/BoatEngine2")]
rotation_speed = 75.0
speed_limit = 25.0
move_force = 8000.0
normal_container = NodePath("CollisionShape3D")
visual_container = NodePath("CollisionShape3D/PlayerBoatInst")
float_force = 1500.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.7, 0.4)
shape = SubResource("ConvexPolygonShape3D_2cixb")

[node name="PlayerBoatInst" parent="CollisionShape3D" index="0" instance=ExtResource("3_itsa4")]

[node name="Particles" type="Node3D" parent="CollisionShape3D" index="1"]

[node name="BoatEngine" parent="CollisionShape3D/Particles" index="0" instance=ExtResource("4_rixfk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9, 1, -5.9)
emitting = false

[node name="BoatEngine2" parent="CollisionShape3D/Particles" index="1" instance=ExtResource("4_rixfk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.1, 1, -5.9)
emitting = false

[node name="DropoffPoint" type="Marker3D" parent="CollisionShape3D" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 1, 0)

[node name="SundialPosition" type="Node3D" parent="CollisionShape3D" index="3" groups=["sundial_boat_position"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 4.6)

[node name="PlayerBoatArea" type="Area3D" parent="CollisionShape3D" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, -0.4)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="CollisionShape3D/PlayerBoatArea" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
shape = SubResource("CapsuleShape3D_jktrs")

[node name="InteractionScanner" type="Area3D" parent="CollisionShape3D" index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, -0.4)
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="CollisionShape3D/InteractionScanner" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 3, 0)
shape = SubResource("CapsuleShape3D_4nvc2")

[node name="TPC" parent="." index="1" node_paths=PackedStringArray("target_group") instance=ExtResource("5_5wq2t")]
_spring_length = 15.0
_offset = Vector3(0, 5, 0)
target_group = NodePath("..")
entry_camera = true
submerged_angle = Vector2(-15, 20)
default_angle = Vector2(-15, 20)

[node name="Controller" type="Node" parent="TPC" index="1"]
script = ExtResource("6_rjn0y")
y_joypad_natural = true

[node name="MenuTPC" parent="." index="2" node_paths=PackedStringArray("target_group") instance=ExtResource("5_5wq2t")]
_spring_length = 15.0
_offset = Vector3(0, 3, 0)
target_group = NodePath("..")
single_group_name = "MenuVC"
switchable_camera = false
_fov = 45.0

[node name="Controller" type="Node" parent="MenuTPC" index="1" node_paths=PackedStringArray("reference_node")]
script = ExtResource("7_bks34")
reference_node = NodePath("../../CollisionShape3D/PlayerBoatInst")

[node name="FPC" parent="." index="3" node_paths=PackedStringArray("target_group") instance=ExtResource("7_4om71")]
_offset = Vector3(0, 10, 0)
target_group = NodePath("..")
submerged_angle = Vector2(-20, 80)
default_angle = Vector2(-20, 80)

[node name="FPCCamera" parent="FPC" index="1" instance=ExtResource("8_k2oyu")]

[node name="Controller" type="Node" parent="FPC" index="2"]
script = ExtResource("8_t2aea")
x_joypad_natural = true
x_mouse_natural = true
y_mouse_natural = true

[node name="Controller" parent="." index="4" node_paths=PackedStringArray("dropoff_point", "interaction_scanner") instance=ExtResource("9_wqan3")]
dropoff_point = NodePath("../CollisionShape3D/DropoffPoint")
player_character_pscn = ExtResource("10_31xpf")
interaction_scanner = NodePath("../CollisionShape3D/InteractionScanner")

[editable path="CollisionShape3D/PlayerBoatInst"]
