[gd_scene load_steps=15 format=3 uid="uid://bl6seajhin6ok"]

[ext_resource type="PackedScene" uid="uid://ci81rhjnjhe5x" path="res://assets/prefabs/entities/base_entity.tscn" id="1_s5hml"]
[ext_resource type="Script" path="res://assets/prefabs/entities/player_boat/player_boat_entity.gd" id="2_rbht2"]
[ext_resource type="PackedScene" uid="uid://di3opcoc1bjq5" path="res://assets/models/player_boat_inst.tscn" id="3_itsa4"]
[ext_resource type="PackedScene" uid="uid://ds1eu4orjyhpy" path="res://assets/prefabs/particles/boat_engine.tscn" id="4_rixfk"]
[ext_resource type="PackedScene" uid="uid://diiot23srn01f" path="res://assets/prefabs/virtual camera/third_person_camera.tscn" id="5_5wq2t"]
[ext_resource type="PackedScene" uid="uid://bq08c3kmmbx62" path="res://assets/prefabs/controllers/camera/virtual_camera_controller.tscn" id="6_7ggm6"]
[ext_resource type="PackedScene" uid="uid://bcgslrgfaqyrk" path="res://assets/prefabs/virtual camera/first_person_camera.tscn" id="7_4om71"]
[ext_resource type="PackedScene" uid="uid://deo4jmce6xulx" path="res://assets/prefabs/controllers/camera/fpc_controller.tscn" id="8_o1kml"]
[ext_resource type="PackedScene" uid="uid://ccsl3yyji70j7" path="res://assets/prefabs/controllers/camera/fpc_camera.tscn" id="9_hx71p"]
[ext_resource type="PackedScene" uid="uid://c26yw05wco6bu" path="res://assets/prefabs/controllers/player/boat/player_boat_controller.tscn" id="9_wqan3"]
[ext_resource type="PackedScene" uid="uid://c2ipvtnsysqv" path="res://assets/prefabs/entities/player_character/player_character_entity.tscn" id="10_31xpf"]
[ext_resource type="PackedScene" uid="uid://dve873wgmefrw" path="res://assets/prefabs/controllers/camera/fpc_sextant.tscn" id="10_c64xa"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_2cixb"]
points = PackedVector3Array(-0.4432, -0.0914739, -3.65871, 0.48322, -0.0826591, -3.6513, -0.303897, 7.83539, -0.246553, 3.10388, 1.01987, -2.51775, -3.06223, 1.01987, -3.81601, 0.482664, 1.92791, -5.34334, 0.0208259, -0.104903, 3.164, 1.48087, 1.99363, 3.48658, -2.08867, 1.99363, 2.1873, 0.993788, 6.53598, -0.246553, 2.29208, 1.01987, -5.11427, -2.21137, 0.908054, -5.03335, -2.89987, 0.53299, -2.19242, 0.18198, 2.15566, 4.78382, -0.280535, 3.32721, -4.62473, -0.303897, 7.83539, 0.240422, -1.76394, 4.58846, -0.246553, 2.13032, 1.99363, 2.02566, 2.94152, 0.695018, -2.02975, 0.344945, 7.67256, -0.246553, 2.94152, 1.1819, -4.1393, -1.34032, 0.752825, 2.76877, -1.1145, 1.99363, 3.97254, 0.766742, 3.33103, -4.43936, 1.23762, 0.733876, 2.9403, -1.30758, 3.0405, -4.24689, -3.06223, 1.01987, -2.19242, 0.0208259, 0.65942, 4.26988, 0.636273, -0.0735105, 2.21044, 1.80499, 4.42644, -0.246553, -0.13474, 0.357568, -4.76144, -0.589064, -0.035177, 2.48922)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4nvc2"]
radius = 7.6
height = 18.2

[node name="PlayerBoat" node_paths=PackedStringArray("propellers", "gas_particles", "normal_container", "visual_container") instance=ExtResource("1_s5hml")]
mass = 600.0
script = ExtResource("2_rbht2")
propeller_rotation_speed = 125.0
propeller_start_weight = 5.0
propeller_stop_weight = 3.0
propellers = [NodePath("CollisionShape3D/ForFPC/PlayerBoatInst/PropellerL"), NodePath("CollisionShape3D/ForFPC/PlayerBoatInst/PropellerR")]
gas_particles = [NodePath("CollisionShape3D/ForFPC/Particles/BoatEngine"), NodePath("CollisionShape3D/ForFPC/Particles/BoatEngine2")]
rotation_speed = 15.0
speed_limit = 25.0
move_force = 5000.0
normal_container = NodePath("CollisionShape3D")
visual_container = NodePath("CollisionShape3D/ForFPC")
float_force = 600.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.7, 0.4)
shape = SubResource("ConvexPolygonShape3D_2cixb")

[node name="ForFPC" type="Node3D" parent="CollisionShape3D" index="0"]

[node name="PlayerBoatInst" parent="CollisionShape3D/ForFPC" index="0" instance=ExtResource("3_itsa4")]

[node name="Particles" type="Node3D" parent="CollisionShape3D/ForFPC" index="1"]

[node name="BoatEngine" parent="CollisionShape3D/ForFPC/Particles" index="0" instance=ExtResource("4_rixfk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9, 1, -5.9)

[node name="BoatEngine2" parent="CollisionShape3D/ForFPC/Particles" index="1" instance=ExtResource("4_rixfk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.1, 1, -5.9)

[node name="DropoffPoint" type="Marker3D" parent="CollisionShape3D/ForFPC" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 1, 0)

[node name="TPC" parent="." index="1" node_paths=PackedStringArray("target_group", "follow_target") instance=ExtResource("5_5wq2t")]
_spring_length = 12.0
_offset = Vector3(0, 4, 0)
target_group = NodePath("..")
max_x_angle = 20.0
min_x_angle = -20.0
follow_target = NodePath("..")

[node name="Controller" parent="TPC" index="1" instance=ExtResource("6_7ggm6")]
use_submerged_angles = false
submerged_min_angle = -15.0
submerged_max_angle = 30.0
mouse_inverted_x = false
mouse_inverted_y = false

[node name="FPC" parent="." index="2" node_paths=PackedStringArray("target_group", "follow_target") instance=ExtResource("7_4om71")]
_offset = Vector3(0, 10, 0)
target_group = NodePath("..")
follow_target = NodePath("../CollisionShape3D/ForFPC")

[node name="Controller" parent="FPC" index="1" instance=ExtResource("8_o1kml")]
submerged_min_angle = -30.0
joypad_inverted_x = true
joypad_inverted_y = false

[node name="FPCCamera" parent="FPC" index="2" instance=ExtResource("9_hx71p")]

[node name="FPCSextant" parent="FPC" index="3" instance=ExtResource("10_c64xa")]

[node name="PlayerBoatArea" type="Area3D" parent="." index="3"]
collision_layer = 4
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerBoatArea" index="0"]
shape = SubResource("ConvexPolygonShape3D_2cixb")

[node name="InteractionScanner" type="Area3D" parent="." index="4"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractionScanner" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 3, 0)
shape = SubResource("CapsuleShape3D_4nvc2")

[node name="Controller" parent="." index="5" node_paths=PackedStringArray("dropoff_point", "third_person_camera", "interaction_scanner") instance=ExtResource("9_wqan3")]
dropoff_point = NodePath("../CollisionShape3D/ForFPC/DropoffPoint")
player_character_pscn = ExtResource("10_31xpf")
third_person_camera = NodePath("../TPC")
interaction_scanner = NodePath("../InteractionScanner")

[editable path="CollisionShape3D/ForFPC/PlayerBoatInst"]
